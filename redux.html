<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation Redux</title>
    <style>
        /* Copiez-collez les m√™mes styles que dans vos autres fichiers */
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,'Open Sans','Helvetica Neue',sans-serif;margin:0;display:flex;color:#333;background-color:#f8f9fa;padding-top:60px}#sidebar{width:280px;position:fixed;height:calc(100% - 60px);background:#fff;border-right:1px solid #ddd;padding:20px;overflow-y:auto;box-shadow:0 0 10px rgba(0,0,0,.05);top:60px}#sidebar h2{margin-top:0;color:#444;border-bottom:2px solid #764abc;padding-bottom:10px}#sidebar ul{list-style-type:none;padding:0}#sidebar li a{display:block;color:#333;padding:10px 15px;text-decoration:none;border-radius:5px;transition:background-color .2s,color .2s}#sidebar li a:hover{background-color:#e9ecef;color:#0056b3}#main-content{margin-left:320px;padding:20px 40px;width:calc(100% - 320px);padding-top:80px}section{margin-bottom:50px;padding-top:20px}h1,h2,h3{color:#0056b3}h1{border-bottom:1px solid #ccc;padding-bottom:10px}h3{margin-top:30px;border-bottom:1px solid #eee;padding-bottom:5px}code{background-color:#e9ecef;padding:.2em .4em;margin:0;font-size:85%;border-radius:3px;font-family:'Courier New',Courier,monospace}pre{background-color:#2d2d2d;color:#f8f8f2;padding:15px;border-radius:5px;overflow-x:auto}pre code{background-color:transparent;padding:0}.topic-title{font-size:1.2em;font-weight:700;margin-top:20px;margin-bottom:10px;color:#555}.main-nav{width:100%;background-color:#343a40;padding:10px 40px;box-sizing:border-box;position:fixed;top:0;left:0;z-index:1000;display:flex;align-items:center}.main-nav a{color:#fff;text-decoration:none;padding:10px 15px;border-radius:5px;margin-right:10px;font-weight:700}.main-nav a.active{background-color:#764abc}.main-nav a:hover{background-color:#495057}
    </style>
</head>
<body>

    <nav class="main-nav">
        <a href="index.html">React</a>
        <a href="mongodb.html">MongoDB</a>
        <a href="express.html">Express.js</a>
        <a href="node.html">Node.js</a>
        <a href="redux.html" class="active">Redux</a>
        <a href="mern-interactions.html">Interactions</a>
        <a href="mern-project-guide.html">Guide de Projet</a>
        <a href="state-transfer.html">Transfert d'√âtat</a>
    </nav>
    
    <nav id="sidebar">
        <h2>Sujets Redux</h2>
        <div class="topic-title">üî∞ D√©butant</div>
        <ul>
            <li><a href="#what-is-redux">Qu'est-ce que Redux ?</a></li>
            <li><a href="#core-principles">Principes Fondamentaux</a></li>
            <li><a href="#redux-flow">Le Flux Redux</a></li>
        </ul>
        <div class="topic-title">üõ†Ô∏è Redux Moderne (Toolkit)</div>
        <ul>
            <li><a href="#redux-toolkit">Qu'est-ce que Redux Toolkit ?</a></li>
            <li><a href="#create-slice">Cr√©er une "Slice"</a></li>
            <li><a href="#dispatch-uselector">Dispatch & useSelector</a></li>
        </ul>
        <div class="topic-title">üöÄ Avanc√©</div>
        <ul>
            <li><a href="#async-thunks">Logique Asynchrone avec les Thunks</a></li>
            <li><a href="#middleware">Middleware</a></li>
            <li><a href="#redux-vs-context">Redux vs. API Context</a></li>
        </ul>
    </nav>

    <main id="main-content">
        <header>
            <h1>Tout sur Redux</h1>
        </header>
        
        <section id="what-is-redux">
            <h2>üî∞ Qu'est-ce que Redux ?</h2>
            <p>Redux est un <strong>conteneur d'√©tat pr√©visible</strong> pour les applications JavaScript. Il vous aide √† √©crire des applications qui se comportent de mani√®re coh√©rente, s'ex√©cutent dans diff√©rents environnements (client, serveur et natif), and sont faciles √† tester. Il fournit un emplacement unique et centralis√© (le "store") pour l'√©tat de votre application, ce qui facilite sa gestion et son d√©bogage.</p>
        </section>

        <section id="core-principles">
            <h2>üî∞ Principes Fondamentaux</h2>
            <p>Redux est construit sur trois principes fondamentaux :</p>
            <ol>
                <li><strong>Source de v√©rit√© unique :</strong> L'√©tat global de toute votre application est stock√© dans un arbre d'objets au sein d'un unique <strong>store</strong>.</li>
                <li><strong>L'√©tat est en lecture seule :</strong> La seule fa√ßon de changer l'√©tat est d'√©mettre une <strong>action</strong>, un objet d√©crivant ce qui s'est pass√©. Vous ne pouvez pas modifier directement l'√©tat.</li>
                <li><strong>Les changements sont effectu√©s avec des fonctions pures :</strong> Pour sp√©cifier comment l'arbre d'√©tat est transform√© par les actions, vous √©crivez des <strong>reducers</strong> purs. Un reducer prend l'√©tat pr√©c√©dent et une action, et retourne le nouvel √©tat.</li>
            </ol>
        </section>
        
        <section id="redux-flow">
            <h2>üî∞ Le Flux Redux</h2>
            <p>Le flux de donn√©es dans Redux est unidirectionnel et strict, ce qui rend la logique pr√©visible.</p>
            <ol>
                <li>Un √©v√©nement se produit dans l'interface utilisateur (ex: un clic sur un bouton).</li>
                <li>L'UI <strong>d√©p√™che une action</strong> (ex: `{ type: 'counter/increment' }`).</li>
                <li>La fonction <strong>reducer</strong> re√ßoit l'√©tat actuel et l'action, et d√©cide quel nouvel √©tat retourner.</li>
                <li>Le <strong>store</strong> central sauvegarde le nouvel √©tat retourn√© par le reducer.</li>
                <li>L'UI, qui est abonn√©e au store, est notifi√©e du changement et se re-render pour refl√©ter le nouvel √©tat.</li>
            </ol>
        </section>
        
        <section id="redux-toolkit">
            <h2>üõ†Ô∏è Qu'est-ce que Redux Toolkit ?</h2>
            <p><strong>Redux Toolkit (RTK)</strong> est la mani√®re officielle et recommand√©e d'√©crire de la logique Redux. Il a √©t√© cr√©√© pour r√©soudre les plaintes courantes concernant le Redux "classique", telles que trop de code r√©p√©titif ("boilerplate") et une configuration complexe. RTK simplifie la configuration du store, la cr√©ation des reducers, et √©limine le besoin d'√©crire les cr√©ateurs d'actions √† la main.</p>
            <p><strong>Vous devriez toujours utiliser Redux Toolkit pour les nouveaux projets Redux.</strong></p>
        </section>

        <section id="create-slice">
            <h2>üõ†Ô∏è Cr√©er une "Slice"</h2>
            <p>La fonction `createSlice` de RTK est au c≈ìur du Redux moderne. Elle g√©n√®re automatiquement les reducers, les cr√©ateurs d'actions et les types d'actions pour une partie sp√©cifique de votre √©tat, le tout √† partir d'une seule fonction.</p>
            <h3>Exemple : Une "slice" pour un compteur</h3>
            <pre><code>import { createSlice } from '@reduxjs/toolkit';

const initialState = {
  value: 0,
};

// Une slice contient la logique du reducer et les actions pour une fonctionnalit√©
export const counterSlice = createSlice({
  name: 'counter',
  initialState,
  reducers: {
    increment: (state) => {
      // RTK utilise la biblioth√®que Immer, ce qui permet de "muter" l'√©tat directement
      state.value += 1;
    },
    decrement: (state) => {
      state.value -= 1;
    },
    incrementByAmount: (state, action) => {
      state.value += action.payload; // payload contient les donn√©es pass√©es avec l'action
    },
  },
});

// Exporter les cr√©ateurs d'actions auto-g√©n√©r√©s
export const { increment, decrement, incrementByAmount } = counterSlice.actions;

// Exporter la fonction reducer pour le store
export default counterSlice.reducer;</code></pre>
        </section>
        
        <section id="dispatch-uselector">
            <h2>üõ†Ô∏è Dispatch & useSelector</h2>
            <p>√Ä l'int√©rieur de vos composants React, vous utilisez deux hooks cl√©s de la biblioth√®que `react-redux` pour interagir avec le store.</p>
            <ul>
                <li><strong>`useDispatch()`</strong> : Ce hook vous donne la fonction `dispatch`, que vous utilisez pour envoyer (d√©p√™cher) des actions au store.</li>
                <li><strong>`useSelector()`</strong> : Ce hook vous permet d'extraire et de lire des donn√©es de l'√©tat du store Redux.</li>
            </ul>
            <h3>Exemple : Utiliser le compteur dans un composant</h3>
            <pre><code>import { useSelector, useDispatch } from 'react-redux';
import { increment, decrement } from './counterSlice';

export function Counter() {
  // Lire la valeur actuelle du compteur depuis le store
  const count = useSelector((state) => state.counter.value);
  // Obtenir la fonction dispatch
  const dispatch = useDispatch();

  return (
    &lt;div&gt;
      &lt;button onClick={() => dispatch(increment())}&gt;+&lt;/button&gt;
      &lt;span&gt;{count}&lt;/span&gt;
      &lt;button onClick={() => dispatch(decrement())}&gt;-&lt;/button&gt;
    &lt;/div&gt;
  );
}</code></pre>
        </section>

        <section id="async-thunks">
            <h2>üöÄ Logique Asynchrone avec les Thunks</h2>
            <p>Les reducers doivent √™tre purs et ne peuvent pas contenir d'effets de bord comme des appels API. Pour g√©rer la logique asynchrone, Redux Toolkit fournit `createAsyncThunk`. C'est une fonction qui g√®re pour vous les types d'actions typiques `pending`/`fulfilled`/`rejected`, facilitant la r√©cup√©ration de donn√©es et la mise √† jour du store.</p>
            <h3>Exemple : R√©cup√©rer un utilisateur</h3>
            <pre><code>import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';

export const fetchUserById = createAsyncThunk(
  'users/fetchById',
  async (userId) => {
    const response = await fetch(`https://api.example.com/users/${userId}`);
    return response.json();
  }
);

const usersSlice = createSlice({
  name: 'users',
  initialState: { entity: null, status: 'idle' },
  extraReducers: (builder) => {
    // Ces reducers √©coutent les actions du thunk
    builder.addCase(fetchUserById.pending, (state) => {
      state.status = 'loading';
    });
    builder.addCase(fetchUserById.fulfilled, (state, action) => {
      state.status = 'succeeded';
      state.entity = action.payload;
    });
  },
});</code></pre>
        </section>
        
        <section id="middleware">
            <h2>üöÄ Middleware</h2>
            <p>Le middleware fournit un point d'extension tiers entre le moment o√π une action est d√©p√™ch√©e et celui o√π elle atteint le reducer. Il est utilis√© pour le logging, le rapport d'erreurs, la communication avec des API asynchrones, le routage, et plus encore. Les Thunks, par exemple, sont un type de middleware.</p>
        </section>

        <section id="redux-vs-context">
            <h2>üöÄ Redux vs. API Context</h2>
            <p>C'est une question fr√©quente. Voici un guide rapide pour savoir quand utiliser l'un ou l'autre :</p>
            <ul>
                <li><strong>Utilisez l'API Context de React pour :</strong> Des mises √† jour peu fr√©quentes, comme le th√®me (mode clair/sombre), le statut d'authentification de l'utilisateur, ou les pr√©f√©rences de langue. C'est parfait lorsque vous avez juste besoin de passer un √©tat en profondeur sans "prop drilling".</li>
                <li><strong>Utilisez Redux pour :</strong> Des mises √† jour fr√©quentes et un √©tat complexe partag√© entre de nombreux composants. Si vous avez un √©tat qui sert de "source de v√©rit√©" pour votre application et que de nombreux composants interagissent avec lui, Redux offre de meilleures optimisations de performance et des outils de d√©bogage.</li>
            </ul>
        </section>

    </main>

</body>

</html>
